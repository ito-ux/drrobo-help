---
// src/components/BlogPost.astro
import Date from "@components/Date.astro";
import type { Category, CommandGroup } from "@libs/microcms";

const { blog } = Astro.props;
---

<article class="prose max-w-none">
  <h1 class="text-3xl font-medium mb-3 leading-normal">{blog.title}</h1>

  <p class="mb-4">
    <Date date={blog.publishedAt || blog.createdAt} />
  </p>

  <div class="flex flex-wrap gap-2 mb-8">
    {/* カテゴリ */}
    {
      blog.category?.length > 0 ? (
        blog.category.map((cat: Category) => (
          <span
          class="bg-gray-600 text-white px-3 py-1 rounded-full text-xs"
        >
          {cat.name}
        </span>
        ))
      ) : (
        <span class="text-gray-400 text-xs">No Category</span>
      )
    }

    {/* コマンドグループ（comgr） */}
    {
      blog.comgr?.length > 0 && (
        blog.comgr.map((g: CommandGroup) => (
          <span
            class="bg-sky-100 text-sky-900 px-3 py-1 rounded-full text-xs border border-sky-200"
            title={g.slug}
          >
            {g.name}
          </span>
        ))
      )
    }
  </div>

  <div set:html={blog.content} class="entry-content prose max-w-none" />
</article>
